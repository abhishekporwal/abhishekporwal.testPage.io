!function(t){var e="logoProgram";if("function"!=typeof ccs_define){var r=t(window.ccsJq);void 0!==r&&(window[e]=r)}else ccs_define(e,["jquery"],t)}(function(d){var o={addToCartSelector:"[data-logo-addtocart]",qtySpanSelector:".ccs-logo-quantity",eventDataAttr:"data-logo-event",eventParamsData:"logo-event-params",productIdAttr:"data-logo-productid",qtyGlobalVariablePrefix:"cclpQuantity",productLinkSelector:"[data-logo-productlink]",atcShownClass:"ccs-logo-atc-shown",linkShownClass:"ccs-logo-link-shown",processedFlag:"ccsLogoProcessed",price:{elementSelector:"span[data-logo-dynamic-price]",getPriceSelector:"a[data-logo-getprice]",priceUrlAttr:"data-logo-price-url",parsingPriceJsAttr:"data-logo-price-parsingjs",runImmediatelyAttr:"data-logo-price-runimmediately",errorLogCallAttr:"data-logo-price-error",fallbackTextAttr:"data-logo-price-fallback-text",showIfPriceAttr:"data-logo-show-if-price",loadingClass:"ccs-logo-price-loading"}};function e(t){var c=d("#"+t);c.on("ccsPrice.init ccsPrice.success",function(t){var e=d(t.target),r=e.is("["+o.price.showIfPriceAttr+"~=atc]"),a=t.namespace;(!r&&"init"===a||r&&"success"===a)&&function(t,e){var r=e.attr(o.productIdAttr),a=t.find(o.addToCartSelector+"["+o.productIdAttr+"='"+r+"']").children(),c=t.find(o.qtySpanSelector+"["+o.productIdAttr+"='"+r+"']");if(0===a.length||a.data(o.processedFlag))return;a.closest(o.addToCartSelector).addClass(o.atcShownClass),c.closest(o.qtySpanSelector).addClass(o.atcShownClass),a.data(o.processedFlag,!0).click(function(){var t=d(this).closest(o.addToCartSelector),e=t.attr(o.productIdAttr),r=t.attr(o.eventDataAttr),a=t.data(o.eventParamsData)||{};a.Qty=window[o.qtyGlobalVariablePrefix+e]||1,ccs_cc_log.dispatchEvent(r,a,100)})}(c,e)}),c.on("ccsPrice.init ccsPrice.success",function(t){var e=d(t.target),r=e.is("["+o.price.showIfPriceAttr+"~=link]"),a=t.namespace;(!r&&"init"===a||r&&"success"===a)&&function(t,e){var r=e.attr(o.productIdAttr),a=t.find(o.productLinkSelector+"["+o.productIdAttr+"='"+r+"'] a");if(0===a.length||a.data(o.processedFlag))return;a.attr("href",a.attr("data-href")).removeAttr("data-href");var c=a.attr("data-title");c&&a.attr("title",c).removeAttr("data-href");a.addClass(o.linkShownClass),a.data(o.processedFlag,!0).click(function(){var t=d(this).closest(o.productLinkSelector),e=t.attr(o.eventDataAttr),r=t.data(o.eventParamsData)||{};ccs_cc_log.dispatchEvent(e,r,100)})}(c,e)}),c.on("ccsPrice.error",function(t){var e=d(t.target),r=e.attr(o.price.fallbackTextAttr);r?e.text(r):e.find("."+o.price.loadingClass).hide()}),c.find(o.price.elementSelector).trigger("ccsPrice.init")}function n(a,t,e,r,c){if(!a||!t||!e)throw new Error("Can't request price: missing function argiments.");var o=r?{logCall:r,actionContext:{type:"dynamicPrice",priceUrl:t}}:null,n={url:t,dataType:"text",xhr:function(){var t=d.ajaxSettings.xhr(),r=t.setRequestHeader;return t.setRequestHeader=function(t,e){"X-Requested-With"!==t&&r.call(this,t,e)},t},success:function(t){!function e(t,r,a,c){try{var o=u(t,JSON.parse),n=u(t,d),i=new Function("$","raw","$html","json",a),s=i(d,t,n,o);if(s&&s.promise)s.done(function(t){e(t,r,a,c)});else{var l=typeof s;"number"==l?s=""+s:"string"!=l&&(s=""),c&&""===d.trim(s)&&p(c.logCall,d.extend(c.actionContext,{errorType:"emptyResult"})),r({result:s})}}catch(t){throw c&&p(c.logCall,d.extend(c.actionContext,{errorType:"parsingException",exception:t.name})),r({error:t}),t}}(t,a,e,o)},error:function(t,e,r){o&&"abort"!==e&&"timeout"!==e&&p(o.logCall,d.extend(o.actionContext,{errorType:"ajax",httpCode:t.status,ajaxCode:t.status,ajaxStatus:e,httpStatus:r}),c),a({error:t})}};d.isFunction(window.css_request_price_filter)&&window.css_request_price_filter(n),d.ajax(n)}function u(t,e){try{return e(d.trim(t))}catch(t){return null}}function p(t,e,r){if(t){var a=e,c=ccs_cc_log.getEventParams(t).ActionContext;if(c){var o=JSON.parse(c);a=d.extend({},o,e)}var n={Et:"Submit",Action:"error",ActionContext:JSON.stringify(a)};r&&(n=d.extend(n,r)),ccs_cc_log.dispatchEvent(t,n)}}function r(t){e(t),function(t){d("#"+t).find(o.price.elementSelector).filter(function(){return!d(this).data(o.processedFlag)}).data(o.processedFlag,!0).each(function(){var r=d(this),t=r.attr(o.price.priceUrlAttr),e=r.attr(o.price.parsingPriceJsAttr),a=r.attr(o.price.errorLogCallAttr),c=function(t){var e=(t.result||"").trim();e&&r.text(e),r.trigger("ccsPrice."+(e?"success":"error"))};r.attr(o.price.runImmediatelyAttr)?(r.find("."+o.price.loadingClass).show(),n(c,t,e,a)):r.on("click",o.price.getPriceSelector,function(){r.find("."+o.price.loadingClass).show(),d(this).remove(),n(c,t,e,a)})})}(t)}d(document).off("ccs.logo-shown").on("ccs.logo-shown",function(t,e){r(e.entryId)});var t={detectFeatures:r,scanEvents:e,requestPrice:n};return window.CcsLogoProgram=t});
//# sourceMappingURL=LogoProgram.min.js.map
